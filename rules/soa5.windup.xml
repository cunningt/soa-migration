<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:windup="http://www.jboss.org/schema/windup"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
						http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
						http://www.jboss.org/schema/windup http://www.jboss.org/schema/windup.xsd">


	<windup:pipeline type="XML" id="jboss-esb-xml">

		<!-- ######### Highlights ######### -->
		<windup:xpath-value 
			description="Convert JMS gateway listener to service binding"
			xpath="//*[local-name()='jms-listener' and @is-gateway='true'][1]/@name"
			effort="1" inline="false" />
		<windup:xpath-value 
			description="ESB-aware listener is no longer required"
			xpath="//*[local-name()='jms-listener' and (not(@is-gateway) or @is-gateway='false')][1]/@name"
			effort="1" inline="false" />
		<windup:xpath-value 
			description="Migrate action processing pipeline for service"
			xpath="//*[local-name()='service']/@name" effort="1" inline="false" />
		<windup:xpath-value 
			description="Create composite service for service"
			xpath="//*[local-name()='service']/@name" effort="1" inline="false" />
		<windup:xpath-value 
			description="Convert action class"
			xpath="//*[local-name()='action' and not(starts-with(@class, 'org.jboss.soa.esb.actions'))]/@class"
			effort="1" inline="false" />
			
		<!-- ######### Notifications ######### -->
		<windup:xpath-value 
			description="JMS Provider XPath Value"
			xpath="//*[local-name()='jms-provider']/@connection-factory" 
			effort="1" inline="true">
			<windup:hints>
				<windup:regex-hint regex=".*">

				</windup:regex-hint>
			</windup:hints>
		</windup:xpath-value>

	</windup:pipeline>
	
	<!-- JMS gateway listener becomes JCA service binding -->

	<!-- JMS non-gateway listener is no longer required -->

	<!-- JMS provider configuration becomes JCA service binding configuration -->

	<!-- Action processing pipeline is no longer necessary -->


	<windup:pipeline type="JAVA" id="java-extension-decorators">
		<!-- Action class becomes bean service -->
		<windup:java-classification
			regex="org.jboss.soa.esb.actions.AbstractActionLifecycle$"
			description="JBossESB Action Handler Classification" />
	</windup:pipeline>

	<windup:java-hints id="java-persistence-hints">
		<windup:java-hint source-type="INHERITANCE"
			regex="org.jboss.soa.esb.actions.AbstractActionLifecycle$">
			#### Changes to Action Class Defintions
			1. Remove 'extends AbstractActionLifecycle' from class definition
			2. Annotate class definition with @Named("ActionName") where
			'ActionName' is a unique name of your choice
		</windup:java-hint>
		<windup:java-hint regex="org.jboss.soa.esb.message.Message"
			effort="1"> 
		<![CDATA[
		]]>
		</windup:java-hint>
	</windup:java-hints>
</beans>
